/* 23 Jan 2020 */
!function(t,e,i){function a(){this.audibilityFired=!1,this.secondsAudible=0,this.started=!1}function o(e){this.rootElement=e,this.started=!1,this.intersectionSupport=!!t.IntersectionObserver,this.intersectionRatio=-1}function r(t){switch(t.type){case g.AdVideoStart:h.hide(!1),l.customParams.ts>0&&setTimeout(function(){"undefined"!=typeof l.playerSize?(m.customEvent(l.playerSize),h.update({type:l.playerSize,data:l.adSize})):m.customEvent("playersize_undefined")},500),l.customParams.imu>0&&setTimeout(function(){m.customEvent(l.mute?"initially_muted":"initially_unmuted")},500),l.state=g.AdImpression,l.customParams.imho>0&&m.customEvent("Impression_site_"+l.customParams.imho),l.state=g.AdVideoStart,p.start(),f.start();break;case g.AdRemainingTimeChange:l.metaData=t.data;break;case g.AdError:m.customEvent("error_videoplayer"),l.state=g.AdError,m.customEvent(g.AdError+"_"+d.MEDIA_FILES_ERROR.code),p.stop(!0),f.stop(!0),setTimeout(function(){v.stopAd()},250);break;case g.AdVideoComplete:l.customParams.fdc?(n.d(g.create(g.AdVideoComplete,l.metaData)),h.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf)):(l.state=g.AdVideoComplete,l.customParams.nr||(p.stop(),f.stop(),h.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf)));break;case g.AdPaused:l.state=g.AdPaused;break;case g.AdPlaying:l.state=g.AdPlaying;break;default:E.error("======================== UNTREATED MEDIA EVENT ========================>",t)}}function s(t){if("event"===t.type)return m.customEvent(t.data.type);if("apply"===t.type)return"resumeAd"===t.data.method&&l.flags.userEngaged&&(l.flags.userEngaged=!1),"function"==typeof v[t.data.method]?v[t.data.method].apply(v,t.data.args):"function"==typeof h[t.data.method]?h[t.data.method].apply(h,t.data.args):E.error('CAN\'T "apply" METHOD =>',t.data.method);if("action"===t.type)switch(t.data.type){case g.AdLoaded:var e=l.adParameters.settingspath?l.adParameters.settingspath:l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath,i=l.customParams.ex>0?"extra"+l.customParams.ex:"default";l.isMobile&&console.log("isMobile enabled"),h.update({type:"SetConfig",data:{clickUrl:m.getClickURL(i),customParams:l.customParams,defaultVolume:l.defaultVolume,location:l.location,domain:l.hostname,mediapath:e}}),h.hide(!0),c.init(h.videoElement)?(l.state=g.AdLoaded,l.linear=!0):(m.customEvent("error_mediafiles"),l.metaData=d.MEDIA_FILES_NOT_FOUND,l.state=g.AdError,m.customEvent(g.AdError+"_"+d.MEDIA_FILES_NOT_FOUND.code));break;case g.AdClickThru:t.data.url?n.d(g.create(g.AdClickThru,{playerHandles:!0,id:t.data.id,url:t.data.url})):n.d(g.create(g.AdClickThru,{playerHandles:!1,id:t.data.id})),m.trackEvent(g.AdClickThru);break;case g.AdUserClose:l.state=g.AdUserClose,c.stop(),p.stop(),f.stop(),h.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf);break;default:E.error("======================== UNTREATED VIEW EVENT ========================>",t)}else E.error("UNKNOWN TYPE VIEW EVENT =>",t)}var n,d,l,u,c,h,m,p,f,v,g,A,E;n={subscribers:{},subscribe:function(t,e,i){"string"==typeof e&&(e=[e]);for(var a=0,o=e.length;a<o;a++){var r=e[a];this.subscribers[r]||(this.subscribers[r]=[]),this.subscribers[r].push({fn:t,ctx:i||null})}},unsubscribe:function(t,e){"string"==typeof e&&(e=[e]);for(var i=e.length;i>=0;i--){var a=this.subscribers[e[i]];if(a&&Array.isArray(a)&&a.length)for(var o=a.length-1;o>=0;o--)"undefined"!=typeof a[o]&&a[o].fn===t&&a.splice(o,1)}},d:function(t){t.type!=g.AdRemainingTimeChange&&E.log("DispatchEvent =>",t.type,f?f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state:"",(this.subscribers[t.type]||[]).length),(this.subscribers[t.type]||[]).forEach(function(e){e.fn&&(t.type==g.AdClickThru&&l.customParams.plc?e.fn.call(e.ctx,t.data.url,t.data.id,t.data.playerHandles):e.fn.call(e.ctx,t))})}},d={WRONG_INIT_PARAMS:{code:900,message:"Initialization parameters are wrong"},WRONG_AD_PARAMETERS:{code:900,message:"Can't parse AdParameters"},NOT_ALLOWED_METHOD:{code:0,message:"This method is not supported"},MEDIA_FILES_ERROR:{code:405,message:"Could not display mediaFile"},MEDIA_FILES_NOT_FOUND:{code:403,message:"Supported mediaFiles not found"}},l=Object.create(Object.prototype,{linear:{get:function(){return this._linear||!0},set:function(t){this._linear!==t&&(this._linear=t)}},isPreviewer:{get:function(){return this._isPreviewer||(this._isPreviewer="none",f.getPosition()!==o.X_FRAME&&(this._isPreviewer="clients.weborama.nl"==t.top.location.host?"preview":"none")),"preview"==this._isPreviewer}},remainingTime:{get:function(){return this._remainingTime||-1},set:function(t){this.remainingTime!==t&&(this._remainingTime=t,h.update({type:g.AdRemainingTimeChange,data:this.metaData}),n.d(g.create(g.AdRemainingTimeChange,{value:this.remainingTime})))}},canSkip:{get:function(){return this._canSkip||!!this.customParams.sk},set:function(t){this._canSkip!==t&&(this._canSkip=t,h.update({type:g.AdSkippableStateChange,data:{value:t}}),n.d(g.create(g.AdSkippableStateChange,{value:t})))}},adSize:{get:function(){return this._adSize||{}},set:function(t){if(this._adSize?this._adSize.width===t.width&&this._adSize.height===t.height||(this._adSize=t,h.update({type:g.AdSizeChange,data:this.adSize}),n.d(g.create(g.AdSizeChange,{width:t.width,height:t.height}))):this._adSize=t,this.adSize.width&&"object"==typeof this.playerSizeParams){if(this.fullscreen)return void(this.playerSize="PlayerFullscreen");var e=this.playerSizeParams,i=this.adSize.width;for(var a in e)if(e.hasOwnProperty(a)){var o=e[a];if((!o[0]||i>=o[0])&&(!o[1]||i<o[1])){this.playerSize=a;break}}}}},playerSize:{get:function(){return this._playerSize},set:function(t){this._playerSize=t}},fullscreen:{get:function(){return this.adSize.viewMode===l.FULLSCREEN}},FULLSCREEN:{value:"fullscreen"},NORMAL:{value:"normal"},duration:{get:function(){return this._duration||-2},set:function(t){this._duration!==t&&(this._duration=t,n.d(g.create(g.AdDurationChange,{duration:t})))}},defaultVolume:{get:function(){return this._defaultVolume},set:function(t){t&&(this._defaultVolume=t)}},volume:{get:function(){return this._volume||this.defaultVolume},set:function(t){if(this._volume!==t){this._volume=t,this.defaultVolume=t,h.update({type:g.AdVolumeChange,data:{volume:t},mute:!!t});try{"undefined"!=typeof c.video&&(c.video.volume=t)}catch(e){E.error("set volume",t,e)}m.trackEvent(g.AdVolumeChange),n.d(g.create(g.AdVolumeChange,{volume:t}))}}},mute:{get:function(){return"undefined"==this._mute?!this.volume:this._mute},set:function(t){if(this._mute!==!!t&&m.customEvent(t?"mute":"unmute"),"undefined"!=typeof c.video){try{c.video.muted=!!t}catch(e){E.error("set muted",t,e)}l.flags.isGoog||(t?c.video.setAttribute("muted","muted"):c.video.removeAttribute("muted"))}this._mute=!!t}},state:{set:function(t){this.state!==t&&this.state!==g.AdStopped&&(this._state=t,h.update({type:t,data:this.metaData}),m.trackEvent(t),n.d(g.create(t,this.metaData)))},get:function(){return this._state}},metaData:{get:function(){return this._metaData||{totalTime:30,currentTime:0}},set:function(t){if(this._metaData){this._metaData=t,t.currentTime>=this.customParams.co&&(l.canSkip=!0);var e=t.currentTime/t.totalTime;e>=.25&&l.middleEvents[0]===!1&&(l.middleEvents[0]=!0,m.trackEvent(g.AdVideoFirstQuartile),h.update({type:g.AdVideoFirstQuartile,data:this.metaData}),n.d(g.create(g.AdVideoFirstQuartile,t))),e>=.5&&l.middleEvents[1]===!1&&(l.middleEvents[1]=!0,m.trackEvent(g.AdVideoMidpoint),h.update({type:g.AdVideoMidpoint,data:this.metaData}),n.d(g.create(g.AdVideoMidpoint,t))),e>=.75&&l.middleEvents[2]===!1&&(l.middleEvents[2]=!0,m.trackEvent(g.AdVideoThirdQuartile),h.update({type:g.AdVideoThirdQuartile,data:this.metaData}),n.d(g.create(g.AdVideoThirdQuartile,t))),l.customParams.fdc&&t.totalTime-t.currentTime<l.customParams.fdc&&l.middleEvents[3]===!1&&(l.middleEvents[3]=!0,m.trackEvent(g.AdVideoComplete),h.update({type:g.AdVideoComplete,data:this.metaData}),p.stop(),f.stop())}else this._metaData=t,n.d(g.create(g.AdDurationChange,this.metaData));l.remainingTime=this.metaData.totalTime-this.metaData.currentTime}},middleEvents:{value:[!1,!1,!1,!1]},savedSource:{get:function(){return this._savedSource||""},set:function(t){this._savedSource=t}},savedAttributes:{value:{}},origin:{get:function(){if(!this._origin){var t=l.adParameters.customView||l.adParameters.mediapath,e=t.split("/");e.length=3,this._origin=e.join("/")}return this._origin}},location:{get:function(){if(!this._location)if(this._location=encodeURIComponent(l.realWindow.location.href),f.getPosition()!==o.X_FRAME)this._location=encodeURIComponent(t.top.location.href);else try{var e=l.realWindow.location.ancestorOrigins;if(e&&e.length>0){var i=e[e.length-1];i.indexOf("chrome-extension")>=0?this._location=encodeURIComponent("fraudulent-chromium-extension"):"http://a"==i||"https://a"==i?this._location=encodeURIComponent(e[0]):this._location=encodeURIComponent(i)}}catch(a){}return this._location}},hostname:{get:function(){return this._hostname||(this._location.indexOf("://")>-1?this._hostname=this._location.split("/")[2]:this._hostname=this._location.split("/")[0],this._hostname=this._hostname.split(":")[0],this._hostname=this._hostname.split("?")[0]),this._hostname}},realWindow:{get:function(){var t=h.root.ownerDocument;return t.defaultView||t.parentWindow}},viewAbilityPercent:{get:function(){return 50}},viewAbilityHasFocus:{get:function(){return!l.customParams.nr}},customParams:{get:function(){return this._customParams},set:function(t){this._customParams||(this._customParams=t)}},flags:{value:{}},mobileOS:{get:function(){if(!this._operatingSystem){var e=navigator.userAgent||navigator.vendor||t.opera;/windows phone/i.test(e)?this._operatingSystem="Windows Phone":/android/i.test(e)?this._operatingSystem="Android":/iPad|iPhone|iPod/.test(e)&&!t.MSStream?this._operatingSystem="iOS":this._operatingSystem="unknown"}return this._operatingSystem}},isMobile:{get:function(){if(!this._isMobile)if(this._isMobile=!1,"maxTouchPoints"in navigator)this._isMobile=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)this._isMobile=navigator.msMaxTouchPoints>0;else{var e=t.matchMedia&&matchMedia("(pointer:coarse)");e&&"(pointer:coarse)"===e.media?this._isMobile=!!e.matches:"orientation"in t?this._isMobile=!0:this._isMobile=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|webOS|BlackBerry|Windows Phone|IEMobile|Opera Mini)/i)}return this._isMobile}}}),c={flags:{},init:function(t){if(!this.flags.inited&&!this.flags.started){this.flags.inited=!0,this.interval,this.intervalTime=0,this.video=t;var i,a,o=l.adParameters.mediafiles,s=l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath;for(i=0;i<this.events.length;i++)this.video.addEventListener(this.events[i],function(t){if(!this.flags.stopped){var e={totalTime:t.target.duration,currentTime:t.target.currentTime};switch(t.type){case"play":this.flags.videoStart&&r.call(this,g.create(g.AdPlaying,e));break;case"pause":if(e.currentTime/e.totalTime>=.98)return;l.flags.userEngaged||r.call(this,g.create(g.AdPaused,e));break;case"ended":l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,m.customEvent("video_timer_clr_byend")),r.call(this,g.create(g.AdVideoComplete,e));break;case"error":E.error("JS-VPAID-WCM::ERROR => mediaElement",t),r.call(this,g.create(g.AdError,e));break;case"timeupdate":if(!this.flags.videoStart&&e.currentTime){l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,setTimeout(function(){m.customEvent("video_timer_clr_"+c.intervalTime)},250)),this.flags.videoStart=!0,r.call(this,g.create(g.AdVideoStart,e));var i=t.target.currentSrc;i&&i.match(/[a-z0-9]+$/)&&setTimeout(function(){},250)}l.flags.userEngaged||r.call(this,g.create(g.AdRemainingTimeChange,e))}}}.bind(this),!0);for(1===this.video.nodeType&&"function"==typeof this.video.hasAttribute&&this.video.hasAttribute("src")&&"function"==typeof this.video.getAttribute&&""!=this.video.getAttribute("src")&&(l.savedSource=this.video.getAttribute("src"),this.video.removeAttribute("src")),i=0;i<o.length;i++)if(this.video.canPlayType(o[i].type)){var n=e.createElement("source");if(n.type=o[i].type,n.src=s+o[i].src,n.id="wb-src-"+Math.round(1e12*Math.random()).toString(36),"function"==typeof this.video.appendChild&&this.video.appendChild(n),l.flags.isGoog||"function"==typeof this.video.hasAttribute&&!this.video.hasAttribute("src")||"function"==typeof this.video.getAttribute&&""==this.video.getAttribute("src")){var d=s+o[i].src;this.video.setAttribute("src",d)}if("function"==typeof this.video.load&&this.video.load(),a=!0,"video/mp4"==o[i].type)break}return l.customParams.sd>0&&(l.volume=0,l.mute=!0),l.customParams.dmmt&&m.customEvent("videoplayer_inited_"+a),a}},play:function(){return!!(l.customParams.nr||this.flags.inited&&!this.flags.started)&&(l.customParams.nr&&(l.middleEvents[0]=!1,l.middleEvents[1]=!1,l.middleEvents[2]=!1),this.flags.started=!0,l.customParams.dmmt&&0==this.intervalTime&&(this.interval=setInterval(function(){c.intervalTime+=1e3,m.customEvent("video_timer_"+c.intervalTime)},1e3)),l.customParams.dmmt&&m.customEvent("videoplayer_playcommand_received"),this.video.play(),!0)},pause:function(){!this.flags.paused&&this.flags.started&&(this.flags.paused=!0,this.video.pause())},resume:function(){this.flags.paused&&(this.flags.paused=!1,this.video.play())},stop:function(){return!(!this.flags.started||this.flags.stopped)&&(l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,m.customEvent("video_timer_clr_stop")),this.flags.stopped=!0,void this.pause())},events:["play","pause","ended","timeupdate","error"]},h={flags:{},init:function(t,i){this.root=t.appendChild(e.createElement("div")),this.root.id="wb-"+Math.round(1e12*Math.random()).toString(36);var a=e.createElement("link");a.rel="stylesheet",a.href=l.adParameters.mediapath+"style.min.css?v=2zjsl7z0lfg0",this.root.appendChild(a),this.videoElement=i||this.root.appendChild(e.createElement("video")),this.videoElement.setAttribute("webkit-playsinline","playsinline"),this.videoElement.setAttribute("playsinline","playsinline"),l.customParams.nr&&this.videoElement.setAttribute("preload","auto");var o=l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath;l.customParams.up&&(this.videoElement.poster=o+"poster.png"),this.updateSize(),l.realWindow.addEventListener("message",function(t){if(t.origin===l.origin){var e={};try{e=JSON.parse(t.data)}catch(i){}e.id===this.root.id&&s.call(this,e)}}.bind(this),!1),this.frameElement=this.root.appendChild(e.createElement("iframe")),this.frameElement.setAttribute("scrolling","no"),this.frameElement.setAttribute("frameborder","no"),this.frameElement.setAttribute("allow","autoplay"),this.frameElement.src=(l.adParameters.customView?l.adParameters.customView:l.adParameters.mediapath+"index.html")+"?id="+this.root.id},hide:function(t){this.frameElement&&(this.frameElement.style.display=t?"none":"inline-block")},update:function(t){this.frameElement&&this.frameElement.contentWindow&&("object"==typeof t&&f&&(t.viewState=t.viewState||f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state),this.frameElement&&this.frameElement.contentWindow.postMessage(JSON.stringify({id:this.root.id,event:t}),"*"))},destroy:function(){if(!this.root||!this.root.parentNode||"function"!=typeof this.root.parentNode.removeChild)return!1;if(this.root.parentNode.removeChild(this.root),this.videoElement&&this.videoElement.attributes)for(;this.videoElement.attributes.length;)this.videoElement.removeAttribute(this.videoElement.attributes[0].nodeName);for(var t in l.savedAttributes)this.videoElement.setAttribute(t,l.savedAttributes[t]);if(l.savedSource&&""!==l.savedSource&&(this.videoElement.setAttribute("src",l.savedSource),this.videoElement.load(),this.videoElement.play()),"function"==typeof this.videoElement.querySelectorAll)for(var e=this.videoElement.querySelectorAll("source[id^='wb-src-']"),i=0;i<e.length;i++)this.videoElement.removeChild(e[i]);if(this.videoElement&&this.videoElement.attributes)for(var a,i=0,o=this.videoElement.attributes,r=o.length;i<r;i++)a=o[i];return!0},cssStyle:function(t){this.root.style.cssText=t,this.updateSize()},resizeVideoElement:function(t){this.videoElement&&this.videoElement.style&&(this.videoElement.style.width=t.width+("string"==typeof t.width?"":"px"),this.videoElement.style.height=t.height+("string"==typeof t.height?"":"px"),this.videoElement.style.top=t.top+("string"==typeof t.top?"":"px"),this.videoElement.style.left=t.left+("string"==typeof t.left?"":"px"))},updateSize:function(){return!!this.root&&(this.root.style.width=l.adSize.width+"px",this.root.style.height=l.adSize.height+"px",void(this.videoElement&&this.videoElement.style&&(this.videoElement.style.width=l.adSize.width+"px",this.videoElement.style.height=l.adSize.height+"px")))}},m={init:function(e,i,a,o){this.options={protocol:t.location.protocol,domain:e.domain,account:e.account,tte:e.tte,aap:e.aap,agi:Math.round(1e3*Math.random())},this.options.protocol.indexOf("http")==-1&&(this.options.protocol="https:"),this.viewableEvents=i||[],this.audibleEvents=o||[],this.pixelTrackEvents=a},protocol:function(){return this.options.protocol},trackEvent:function(t){if(g.convert(t)!==t){var e="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn={{name}}&g.ra={{random}}";t===g.AdImpression&&(e="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=im&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.hr=XC&g.ra={{random}}"),this.options.name=g.convert(t),this.options.random=Math.round(1e6*Math.random()),this.sendToURL(this.prepareURL(e,this.options))}if(this.pixelTrackEvents.hasOwnProperty(t)&&""!=this.pixelTrackEvents[t]&&this.sendToURL(this.pixelTrackEvents[t]),this.viewableEvents.indexOf(t)!=-1){var i=t+f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state;this.customEvent(i)}if(l.customParams.aev&&this.audibleEvents.indexOf(t)!=-1){var i=t+(l.mute?a.OFF:a.ON);this.customEvent(i)}},customEvent:function(t){if("undefined"==typeof t||"undefined"==t)m.customEvent("error_undefined_event");else{t.indexOf("extended_video")!=-1&&(t+="_"+f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state.toLowerCase());var e="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn={{name}}&g.ra={{random}}";this.options.name=t,this.options.random=Math.round(1e6*Math.random()),this.sendToURL(this.prepareURL(e,this.options)),this.pixelTrackEvents.hasOwnProperty(t)&&""!=this.pixelTrackEvents[t]&&this.sendToURL(this.pixelTrackEvents[t]),t!=A.MRCViewable&&t!=A.MRCUnviewable||h.update({type:t}),l.adParameters.hasOwnProperty("customEvents")&&l.adParameters.customEvents.hasOwnProperty(t)&&this.sendToURL(this.prepareURL(l.adParameters.customEvents[t],this.options))}},getClickURL:function(t){var e="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=cl&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&g.lu=";if(t&&"default"!==t){var i=t.match(/\d+/g);i&&1==i.length&&(e+="&a.urlid="+(parseInt(i[0],10)+0))}return l.customParams.utm&&(this.options.aycp=encodeURIComponent(l.customParams.utm),e+="&a.ycp={{aycp}}"),this.prepareURL(e,this.options)},prepareURL:function(t,e){e=e||this.options,l.adParameters.hasOwnProperty("wcm")&&l.adParameters.wcm.hasOwnProperty("siteid")&&(e.aycp=l.adParameters.wcm.siteid,t+="&a.ycp={{aycp}}");for(var i in e)e.hasOwnProperty(i)&&(t=t.replace(new RegExp("{{"+i+"}}","g"),e[i]));return t},sendToURL:function(t,i){var a=e.createElement("img");i&&(a.onload=a.onerror=i),a.src=t}},a.ON="Audible",a.OFF="Inaudible",a.DELAY=250,a.FIRE_TIME=2e3,a.prototype.start=function(){this.updater||(this.started=!0,this.updater=setInterval(a.updateTime.bind(this),a.DELAY))},a.prototype.pause=function(){this.updater&&(clearInterval(this.updater),this.updater=null)},a.prototype.resume=function(){this.started&&this.start()},a.prototype.stop=function(t){this.updater&&clearInterval(this.updater),this.started=!1,a.updateTime.call(this),this.audibilityFired||t||(this.audibilityFired=!0,m.customEvent(a.OFF))},a.updateTime=function(){return this.audibilityFired?clearInterval(this.updater):(l.mute||l.volume<=0?this.secondsAudible=0:this.secondsAudible+=a.DELAY,void(this.secondsAudible>=a.FIRE_TIME&&(this.audibilityFired=!0,m.customEvent(a.ON),clearInterval(this.updater))))},o.DELAY=250,o.ON_PAGE="OnPage",o.S_FRAME="SameDomainFrame",o.X_FRAME="CrossDomainFrame",o.VIEWABLE="Viewable",o.NOT_VIEWABLE="Unviewable",o.UNDETERMINED="Undetermined",o.prototype.hasFocus=function(){return("undefined"===e.hidden||e.hidden!==!0)&&(this.getPosition()===o.X_FRAME||"function"!=typeof t.top.document.hasFocus||t.top.document.hasFocus())},o.prototype.getPosition=function(){if(!this.position)if(t.top===l.realWindow)this.position=o.ON_PAGE;else{this.position=o.S_FRAME;try{for(var e=l.realWindow;e.parent!==e;){if(e.parent.document.domain!==e.document.domain){this.position=o.X_FRAME;break}e=e.parent}}catch(i){this.position=o.X_FRAME}}return this.position},o.prototype.init=function(t,e){if(this.intersectionSupport){var i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?this.rootElement.ownerDocument.defaultView.IntersectionObserver:IntersectionObserver;this.intersectionObserver=new i(function(t){this.intersectionRatio=Math.round(1e4*t[0].intersectionRatio)/100}.bind(this),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(this.rootElement)}else if(this.getPosition()==o.X_FRAME){if(t&&t.length&&"function"==typeof e)for(;t.length;)e(t.shift().name+o.UNDETERMINED);return!1}2==arguments.length&&t&&t.length&&"function"==typeof e&&(this.observerData=t,this.observerHandler=e)},o.prototype.start=function(){this.updater||(this.started=!0,this.updater=setInterval(o.updateTime.bind(this),o.DELAY))},o.prototype.pause=function(){this.updater&&(clearInterval(this.updater),this.updater=null)},o.prototype.resume=function(){this.started&&this.start()},o.prototype.stop=function(t){if(this.updater&&clearInterval(this.updater),this.started=!1,o.updateTime.call(this),this.observerData&&this.observerData.length&&!t)for(;this.observerData.length;)this.observerHandler(this.observerData.shift().name+o.NOT_VIEWABLE);this.observerData=[]},o.prototype.getViewAbility=function(e,i){if(this.intersectionSupport)return o.match(this.hasFocus(),i,this.intersectionRatio,e);if(this.getPosition()==o.X_FRAME)return{state:o.UNDETERMINED,percent:0,focus:!1};if("undefined"==typeof l.realWindow||"object"!=typeof l.realWindow)return m.customEvent("error_slot_window"),{state:o.UNDETERMINED,percent:0,focus:!1};var a=l.realWindow,r=this.rootElement.getBoundingClientRect(),s=o.calculateArea(r,a);try{for(;a!==t.top;){var n=a.name||(a.name="wb-"+Math.round(1e6*Math.random()).toString(16));a=a.parent,r=a.frames[n].frameElement.getBoundingClientRect(),s=Math.min(o.calculateArea(r,a),s)}}catch(d){return{state:o.UNDETERMINED,percent:0,focus:!1}}return o.match(this.hasFocus(),i,s,e)},o.updateTime=function(){var t=this.getViewAbility();if(!this.observerData||!this.observerData.length)return clearInterval(this.updater);for(var e=[],i=0;i<this.observerData.length;i++){var a=this.observerData[i];l.customParams.nr&&(a.useFocus=!1),"string"!=typeof a.duration||a.duration.indexOf("%")==-1||isNaN(l.metaData.totalTime)||(a.duration=Math.floor(2*l.metaData.totalTime)/2*parseInt(a.duration,10)*10),(!a.useFocus||t.focus)&&Math.round(t.percent)>=a.percent?"true"==a.useSound?a.timeInView=l.mute?0:o.DELAY+(a.timeInView||0):a.timeInView=o.DELAY+(a.timeInView||0):a.timeInView=0,a.timeInView>=a.duration?this.observerHandler(a.name+o.VIEWABLE):e.push(a)}this.observerData=e},o.match=function(t,e,i,a){var r=o.NOT_VIEWABLE;return 3333333==i?(r=o.UNDETERMINED,{state:r,focus:t,percent:i}):((t||!e)&&i>=a&&(r=o.VIEWABLE),{state:r,focus:t,percent:i})},o.calculateArea=function(t,e){var i=t.width*t.height,a=t.width,o=t.height;return t.top<0&&(o+=t.top),t.bottom>e.innerHeight&&(o-=t.bottom-e.innerHeight),t.left<0&&(a+=t.left),t.right>e.innerWidth&&(a-=t.right-e.innerWidth),a*o*100/i},g={create:function(t,e){return{type:t,data:e}},convert:function(t){return{AdLoaded:"load",AdStarted:"creativeView",AdVideoStart:"start",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserClose:"close",AdSkipped:"skip",AdClickThru:"click",AdPaused:"pause",AdPlaying:"resume",AdVolumeChange:"volume"}[t]||t}},g.AdLoaded="AdLoaded",g.AdStarted="AdStarted",g.AdStopped="AdStopped",g.AdSkipped="AdSkipped",g.AdLinearChange="AdLinearChange",g.AdSizeChange="AdSizeChange",g.AdExpandedChange="AdExpandedChange",g.AdSkippableStateChange="AdSkippableStateChange",g.AdRemainingTimeChange="AdRemainingTimeChange",g.AdDurationChange="AdDurationChange",g.AdVolumeChange="AdVolumeChange",g.AdImpression="AdImpression",g.AdVideoStart="AdVideoStart",g.AdVideoFirstQuartile="AdVideoFirstQuartile",g.AdVideoMidpoint="AdVideoMidpoint",g.AdVideoThirdQuartile="AdVideoThirdQuartile",g.AdVideoComplete="AdVideoComplete",g.AdClickThru="AdClickThru",g.AdInteraction="AdInteraction",g.AdUserAcceptInvitation="AdUserAcceptInvitation",g.AdUserMinimize="AdUserMinimize",g.AdUserClose="AdUserClose",g.AdPaused="AdPaused",g.AdPlaying="AdPlaying",g.AdLog="AdLog",g.AdError="AdError",A={},A.MRCViewable="MRCViewable",A.MRCUnviewable="MRCUnviewable",A.MRCUndetermined="MRCUndetermined",E={injectScripts:function(t,i){if(i&&i.length)for(var a in i)if(i.hasOwnProperty(a)){var o=e.createElement("script");o.type="text/javascript",o.src=i[a],t.appendChild(o)}},injectIFrames:function(t,i){if(l.customParams.sf>0){var a=e.createElement("iframe");a.src=m.protocol()+"//cstatic.weborama.fr/iframe/external_all.html",a.style.cssText="width:1px;height:1px;visibility:hidden;position:absolute;border:0",t.appendChild(a)}if(i&&i.length)for(var o in i)if(i.hasOwnProperty(o)){var a=e.createElement("iframe");a.src=i[o],a.style.cssText="width:1px;height:1px;visibility:hidden;position:absolute;border:0",t.appendChild(a)}},log:function(){i&&console.log.apply(console,["JS-VPAID-WCM::INFO =>"].concat(arguments))},warn:function(){console.log.apply(console,["JS-VPAID-WCM::WARN =>"].concat(arguments))},error:function(){console.log.apply(console,["JS-VPAID-WCM::ERROR =>"].concat(arguments))}},u=function(){console.log("JS-VPAID-WCM::INFO => 2020-01-23T14:11:57.231Z")},u.prototype.handshakeVersion=function(){return E.log("handshakeVersion"),"2.0"},u.prototype.initAd=function(t,r,s,u,c,A){if("string"==typeof c&&(c={AdParameters:c},E.warn('The typeof parameter "creativeData" should be an "object" with key "AdParameters"'),E.warn("Read page 44 from https://www.iab.com/wp-content/uploads/2015/06/VPAID_2_0_Final_04-10-2012.pdf")),"object"!=typeof c||!c.AdParameters||"object"!=typeof A||!A.slot)return E.error(d.WRONG_INIT_PARAMS),E.error("initAd",arguments),n.d(g.create(g.AdError,d.WRONG_INIT_PARAMS));try{l.adParameters=JSON.parse(c.AdParameters)}catch(y){return E.error(d.WRONG_AD_PARAMETERS),E.error("initAd",arguments),n.d(g.create(g.AdError,d.WRONG_AD_PARAMETERS))}var b={aev:0,cf:0,co:5,ct:1,daf:750,dm:0,dmmt:0,ex:0,fdc:0,imho:0,imu:1,nr:0,plc:0,poc:0,sd:0,sf:0,sk:1,ss:1,st:1,ts:1,up:0,us:0,utm:0};try{if(l.adParameters.cp)for(var _=decodeURIComponent(l.adParameters.cp).split("|"),P=0;P<_.length;P++)if(_[P]){var S=_[P].split(":");2==S.length&&""!=S[1]?"undefined"!=typeof b[S[0]]?b[S[0]]=S[1].match(/[a-zA-Z]/i)?S[1]:parseInt(S[1],10):b[S[0]]=S[1]:b[S[0]]=!0}}catch(y){}if(l.customParams=b,l.playerSizeParams=l.adParameters.playerSize||{PlayerSmall:[0,480],PlayerNormal:[480,720],PlayerBig:[720,960],PlayerHuge:[960,0]},l.adSize={width:t,height:r,viewMode:s},i=!!l.customParams.dm,l.defaultVolume=.5,E.log("initAd",arguments),A.videoSlot&&"undefined"!=typeof A.videoSlot.attributes)for(var w,P=0,T=A.videoSlot.attributes,V=T.length;P<V;P++)w=T[P],l.savedAttributes[w.nodeName]=w.nodeValue;var I=[g.AdImpression,g.AdVideoStart,g.AdVideoFirstQuartile,g.AdVideoMidpoint,g.AdVideoThirdQuartile,g.AdVideoComplete],C=[g.AdVideoStart,g.AdVideoFirstQuartile,g.AdVideoMidpoint,g.AdVideoThirdQuartile,g.AdVideoComplete],R={};if(l.adParameters.pixel&&l.adParameters.pixel.length)for(var P=0;P<l.adParameters.pixel.length;P++){var M=l.adParameters.pixel[P];R[M.name]=M.url}m.init(l.adParameters.wcm,I,R,C),A.slot&&1===A.slot.nodeType||(A.slot=e.body,E.warn('Invalid parameter "environmentVars.slot"'));var D=0;for(var k in A.videoSlot)if(A.videoSlot.hasOwnProperty(k)){var O=""+A.videoSlot[k];switch(k){case"currentSrc":case"currentTime":case"duration":case"ended":case"handlers":case"paused":case"playbackRate":case"playsinline":case"src":case"type":case"webkit-playsinline":D++}O.indexOf("goog_")!==-1&&(l.flags.isGoog=!0)}if(!A.videoSlot||1===A.videoSlot.nodeType&&"VIDEO"===A.videoSlot.nodeName.toUpperCase()||l.flags.isGoog||(D>=10?l.flags.isGoog=!0:(m.customEvent("error_videoslot_null"),A.videoSlot=null,E.warn('Invalid parameter "environmentVars.videoSlot"'))),h.init(A.slot,A.videoSlot?A.videoSlot:null),p=new a,f=new o(h.root),f.init(l.adParameters.mrcTracker,function(t){l.flags[t]=!0,m.customEvent(t),l.customParams.imho>0&&m.customEvent(t+"_site_"+l.customParams.imho)}.bind(this)),E.injectScripts(h.root,l.adParameters.scripts),E.injectIFrames(h.root,l.adParameters.frames),l.customParams.poc)var N=setInterval(function(){var t=f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state;l.flags.visibleReport!=t&&(l.flags.visibleReport=t,t==o.VIEWABLE?v.resumeAd():t==o.NOT_VIEWABLE?v.pauseAd():t==o.UNDETERMINED&&clearInterval(N))},500);m.customEvent(f.getPosition())},u.prototype.startAd=function(){E.log("startAd"),l.customParams.dmmt&&m.customEvent("start_ad"),c.play()&&(l.state=g.AdStarted)},u.prototype.stopAd=function(){E.log("stopAd"),c.stop(),p.stop(),f.stop(),h.destroy()&&(l.state=g.AdStopped)},u.prototype.skipAd=function(){E.log("try_skipAd"),this.getAdSkippableState()&&(E.log("skipAd"),l.state=g.AdSkipped,c.stop(),p.stop(),f.stop(),h.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf))},u.prototype.resizeAd=function(t,e,i){E.log("resizeAd",arguments);var a=l.fullscreen;l.adSize={width:t,height:e,viewMode:i||"normal"},l.fullscreen&&!a&&m.customEvent("isFullscreen"),h.updateSize()},u.prototype.pauseAd=function(){l.flags.userEngaged||(E.log("pauseAd"),c.pause(),p.pause(),f.pause())},u.prototype.fakePauseAd=function(t){E.log("fakePauseAd"),l.flags.userEngaged=!0,c.pause(),l.remainingTime=-2,l.duration=-2},u.prototype.resumeAd=function(){l.flags.userEngaged||(E.log("resumeAd"),c.resume(),p.resume(),f.resume(),h.update({type:"forcedResumeAd"}))},u.prototype.expandAd=function(){E.log("expandAd"),n.d(g.create(g.AdLog,d.NOT_ALLOWED_METHOD))},u.prototype.collapseAd=function(){E.log("collapseAd"),n.d(g.create(g.AdLog,d.NOT_ALLOWED_METHOD))},u.prototype.setAdVolume=function(t){E.log("setAdVolume",t),t="string"==typeof t?parseInt(t,10):t,t>1&&(t/=100),t<0&&(t=0),l.mute=!t,l.volume=t},u.prototype.getAdVolume=function(){return E.log("getAdVolume"),l.mute?0:l.volume},u.prototype.getAdDuration=function(){return l.flags.userEngaged?l.duration:l.metaData?l.metaData.totalTime:-2},u.prototype.getAdLinear=function(){return E.log("getAdLinear"),l.linear},u.prototype.getAdWidth=function(){return E.log("getAdWidth"),l.adSize.width},u.prototype.getAdHeight=function(){return E.log("getAdHeight"),l.adSize.height},u.prototype.getAdRemainingTime=function(){return l.remainingTime},u.prototype.getAdExpanded=function(){return E.log("getAdExpanded"),!0},u.prototype.getAdSkippableState=function(){return E.log("getAdSkippableState"),l.canSkip},u.prototype.getAdIcons=function(){return E.log("getAdIcons"),!1},u.prototype.getAdCompanions=function(){return E.log("getAdCompanions"),""},u.prototype.subscribe=function(t,e,i){n.subscribe(t,e,i)},u.prototype.unsubscribe=function(t,e){n.unsubscribe(t,e)},t.getVPAIDAd=function(){return v||(v=new u),
v}}(window,document);