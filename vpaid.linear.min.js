/* 27 Feb 2020 */
!function(e,t,i){function a(){this.audibilityFired=!1,this.secondsAudible=0,this.started=!1}function o(t){this.rootElement=t,this.started=!1,this.intersectionSupport=!!e.IntersectionObserver,this.intersectionRatio=-1}function r(e){switch(e.type){case g.AdVideoStart:m.hide(!1),l.customParams.ts>0&&setTimeout(function(){"undefined"!=typeof l.playerSizeDesktop?(h.customEvent(l.playerSizeDesktop),0==l.customParams.dmts&&h.customEvent(l.playerSizeMobile),m.update({type:l.playerSizeDesktop,data:l.adSize})):h.customEvent("playersize_undefined")},500),l.customParams.imu>0&&setTimeout(function(){h.customEvent(l.mute?"initially_muted":"initially_unmuted")},500),l.state=g.AdImpression,l.customParams.imho>0&&h.customEvent("Impression_site_"+l.customParams.imho),l.state=g.AdVideoStart,p.start(),f.start();break;case g.AdRemainingTimeChange:l.metaData=e.data;break;case g.AdError:h.customEvent("error_videoplayer"),l.state=g.AdError,h.customEvent(g.AdError+"_"+d.MEDIA_FILES_ERROR.code),p.stop(!0),f.stop(!0),setTimeout(function(){v.stopAd()},250);break;case g.AdVideoComplete:l.customParams.fdc?(n.d(g.create(g.AdVideoComplete,l.metaData)),m.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf)):(l.state=g.AdVideoComplete,l.customParams.nr||(p.stop(),f.stop(),m.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf)));break;case g.AdPaused:l.state=g.AdPaused;break;case g.AdPlaying:l.state=g.AdPlaying;break;default:y.error("======================== UNTREATED MEDIA EVENT ========================>",e)}}function s(e){if("event"===e.type)return h.customEvent(e.data.type);if("apply"===e.type)return"resumeAd"===e.data.method&&l.flags.userEngaged&&(l.flags.userEngaged=!1),"function"==typeof v[e.data.method]?v[e.data.method].apply(v,e.data.args):"function"==typeof m[e.data.method]?m[e.data.method].apply(m,e.data.args):y.error('CAN\'T "apply" METHOD =>',e.data.method);if("action"===e.type)switch(e.data.type){case g.AdLoaded:var t=l.adParameters.settingspath?l.adParameters.settingspath:l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath,i=l.customParams.ex>0?"extra"+l.customParams.ex:"default";l.isMobile&&console.log("isMobile enabled"),m.update({type:"SetConfig",data:{clickUrl:h.getClickURL(i),customParams:l.customParams,defaultVolume:l.defaultVolume,location:l.location,domain:l.hostname,mediapath:t}}),m.hide(!0),c.init(m.videoElement)?(l.state=g.AdLoaded,l.linear=!0):(h.customEvent("error_mediafiles"),l.metaData=d.MEDIA_FILES_NOT_FOUND,l.state=g.AdError,h.customEvent(g.AdError+"_"+d.MEDIA_FILES_NOT_FOUND.code));break;case g.AdClickThru:e.data.url?n.d(g.create(g.AdClickThru,{playerHandles:!0,id:e.data.id,url:e.data.url})):n.d(g.create(g.AdClickThru,{playerHandles:!1,id:e.data.id})),h.trackEvent(g.AdClickThru);break;case g.AdUserClose:l.state=g.AdUserClose,c.stop(),p.stop(),f.stop(),m.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf);break;default:y.error("======================== UNTREATED VIEW EVENT ========================>",e)}else y.error("UNKNOWN TYPE VIEW EVENT =>",e)}var n,d,l,u,c,m,h,p,f,v,g,A,y;n={subscribers:{},subscribe:function(e,t,i){"string"==typeof t&&(t=[t]);for(var a=0,o=t.length;a<o;a++){var r=t[a];this.subscribers[r]||(this.subscribers[r]=[]),this.subscribers[r].push({fn:e,ctx:i||null})}},unsubscribe:function(e,t){"string"==typeof t&&(t=[t]);for(var i=t.length;i>=0;i--){var a=this.subscribers[t[i]];if(a&&Array.isArray(a)&&a.length)for(var o=a.length-1;o>=0;o--)"undefined"!=typeof a[o]&&a[o].fn===e&&a.splice(o,1)}},d:function(e){e.type!=g.AdRemainingTimeChange&&y.log("DispatchEvent =>",e.type,f?f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state:"",(this.subscribers[e.type]||[]).length),(this.subscribers[e.type]||[]).forEach(function(t){t.fn&&(e.type==g.AdClickThru&&l.customParams.plc?t.fn.call(t.ctx,e.data.url,e.data.id,e.data.playerHandles):t.fn.call(t.ctx,e))})}},d={WRONG_INIT_PARAMS:{code:900,message:"Initialization parameters are wrong"},WRONG_AD_PARAMETERS:{code:900,message:"Can't parse AdParameters"},NOT_ALLOWED_METHOD:{code:0,message:"This method is not supported"},MEDIA_FILES_ERROR:{code:405,message:"Could not display mediaFile"},MEDIA_FILES_NOT_FOUND:{code:403,message:"Supported mediaFiles not found"}},l=Object.create(Object.prototype,{linear:{get:function(){return this._linear||!0},set:function(e){this._linear!==e&&(this._linear=e)}},isPreviewer:{get:function(){return this._isPreviewer||(this._isPreviewer="none",f.getPosition()!==o.X_FRAME&&(this._isPreviewer="clients.weborama.nl"==e.top.location.host?"preview":"none")),"preview"==this._isPreviewer}},remainingTime:{get:function(){return this._remainingTime||-1},set:function(e){this.remainingTime!==e&&(this._remainingTime=e,m.update({type:g.AdRemainingTimeChange,data:this.metaData}),n.d(g.create(g.AdRemainingTimeChange,{value:this.remainingTime})))}},canSkip:{get:function(){return this._canSkip||!!this.customParams.sk},set:function(e){this._canSkip!==e&&(this._canSkip=e,m.update({type:g.AdSkippableStateChange,data:{value:e}}),n.d(g.create(g.AdSkippableStateChange,{value:e})))}},adSize:{get:function(){return this._adSize||{}},set:function(e){if(this._adSize?this._adSize.width===e.width&&this._adSize.height===e.height||(this._adSize=e,m.update({type:g.AdSizeChange,data:this.adSize}),n.d(g.create(g.AdSizeChange,{width:e.width,height:e.height}))):this._adSize=e,this.adSize.width&&"object"==typeof this.playerSizeParams){if(this.fullscreen)return void(this.playerSize="PlayerFullscreen");var t=this.playerSizeParams,i=this.adSize.width;for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];(!o[0]||i>=o[0])&&(!o[1]||i<o[1])&&("undefined"==typeof this.playerSizeDesktop?this.playerSizeDesktop=a:this.playerSizeMobile=a)}}}},playerSize:{get:function(){return this._playerSize},set:function(e){this._playerSize=e}},fullscreen:{get:function(){return this.adSize.viewMode===l.FULLSCREEN}},FULLSCREEN:{value:"fullscreen"},NORMAL:{value:"normal"},duration:{get:function(){return this._duration||-2},set:function(e){this._duration!==e&&(this._duration=e,n.d(g.create(g.AdDurationChange,{duration:e})))}},defaultVolume:{get:function(){return this._defaultVolume},set:function(e){e&&(this._defaultVolume=e)}},volume:{get:function(){return this._volume||this.defaultVolume},set:function(e){if(this._volume!==e){this._volume=e,this.defaultVolume=e,m.update({type:g.AdVolumeChange,data:{volume:e},mute:!!e});try{"undefined"!=typeof c.video&&(c.video.volume=e)}catch(t){y.error("set volume",e,t)}h.trackEvent(g.AdVolumeChange),n.d(g.create(g.AdVolumeChange,{volume:e}))}}},mute:{get:function(){return"undefined"==this._mute?!this.volume:this._mute},set:function(e){if(this._mute!==!!e&&h.customEvent(e?"mute":"unmute"),"undefined"!=typeof c.video){try{c.video.muted=!!e}catch(t){y.error("set muted",e,t)}l.flags.isGoog||(e?c.video.setAttribute("muted","muted"):c.video.removeAttribute("muted"))}this._mute=!!e}},state:{set:function(e){this.state!==e&&this.state!==g.AdStopped&&(this._state=e,m.update({type:e,data:this.metaData}),h.trackEvent(e),n.d(g.create(e,this.metaData)))},get:function(){return this._state}},metaData:{get:function(){return this._metaData||{totalTime:30,currentTime:0}},set:function(e){if(this._metaData){this._metaData=e,e.currentTime>=this.customParams.co&&(l.canSkip=!0),l.customParams.tsec&&e.currentTime>=10&&(l.customParams.tsec=0,h.customEvent("AdVideoSecond10"));var t=e.currentTime/e.totalTime;t>=.25&&l.middleEvents[0]===!1&&(l.middleEvents[0]=!0,h.trackEvent(g.AdVideoFirstQuartile),m.update({type:g.AdVideoFirstQuartile,data:this.metaData}),n.d(g.create(g.AdVideoFirstQuartile,e))),t>=.5&&l.middleEvents[1]===!1&&(l.middleEvents[1]=!0,h.trackEvent(g.AdVideoMidpoint),m.update({type:g.AdVideoMidpoint,data:this.metaData}),n.d(g.create(g.AdVideoMidpoint,e))),t>=.75&&l.middleEvents[2]===!1&&(l.middleEvents[2]=!0,h.trackEvent(g.AdVideoThirdQuartile),m.update({type:g.AdVideoThirdQuartile,data:this.metaData}),n.d(g.create(g.AdVideoThirdQuartile,e))),l.customParams.fdc&&e.totalTime-e.currentTime<l.customParams.fdc&&l.middleEvents[3]===!1&&(l.middleEvents[3]=!0,h.trackEvent(g.AdVideoComplete),m.update({type:g.AdVideoComplete,data:this.metaData}),p.stop(),f.stop())}else this._metaData=e,n.d(g.create(g.AdDurationChange,this.metaData));l.remainingTime=this.metaData.totalTime-this.metaData.currentTime}},middleEvents:{value:[!1,!1,!1,!1]},savedSource:{get:function(){return this._savedSource||""},set:function(e){this._savedSource=e}},savedAttributes:{value:{}},origin:{get:function(){if(!this._origin){var e=l.adParameters.customView||l.adParameters.mediapath,t=e.split("/");t.length=3,this._origin=t.join("/")}return this._origin}},location:{get:function(){if(!this._location)if(this._location=encodeURIComponent(l.realWindow.location.href),f.getPosition()!==o.X_FRAME)this._location=encodeURIComponent(e.top.location.href);else try{var t=l.realWindow.location.ancestorOrigins;if(t&&t.length>0){var i=t[t.length-1];i.indexOf("chrome-extension")>=0?this._location=encodeURIComponent("fraudulent-chromium-extension"):"http://a"==i||"https://a"==i?this._location=encodeURIComponent(t[0]):this._location=encodeURIComponent(i)}}catch(a){}return this._location}},hostname:{get:function(){return this._hostname||(this._location.indexOf("://")>-1?this._hostname=this._location.split("/")[2]:this._hostname=this._location.split("/")[0],this._hostname=this._hostname.split(":")[0],this._hostname=this._hostname.split("?")[0]),this._hostname}},realWindow:{get:function(){var e=m.root.ownerDocument;return e.defaultView||e.parentWindow}},viewAbilityPercent:{get:function(){return 50}},viewAbilityHasFocus:{get:function(){return!l.customParams.nr}},customParams:{get:function(){return this._customParams},set:function(e){this._customParams||(this._customParams=e)}},flags:{value:{}},mobileOS:{get:function(){if(!this._operatingSystem){var t=navigator.userAgent||navigator.vendor||e.opera;/windows phone/i.test(t)?this._operatingSystem="Windows Phone":/android/i.test(t)?this._operatingSystem="Android":/iPad|iPhone|iPod/.test(t)&&!e.MSStream?this._operatingSystem="iOS":this._operatingSystem="unknown"}return this._operatingSystem}},isMobile:{get:function(){if(!this._isMobile)if(this._isMobile=!1,"maxTouchPoints"in navigator)this._isMobile=navigator.maxTouchPoints>0;else if("msMaxTouchPoints"in navigator)this._isMobile=navigator.msMaxTouchPoints>0;else{var t=e.matchMedia&&matchMedia("(pointer:coarse)");t&&"(pointer:coarse)"===t.media?this._isMobile=!!t.matches:"orientation"in e?this._isMobile=!0:this._isMobile=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|webOS|BlackBerry|Windows Phone|IEMobile|Opera Mini)/i)}return this._isMobile}}}),c={flags:{},init:function(e){if(!this.flags.inited&&!this.flags.started){this.flags.inited=!0,this.interval,this.intervalTime=0,this.video=e;var i,a,o=l.adParameters.mediafiles,s=l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath;for(i=0;i<this.events.length;i++)this.video.addEventListener(this.events[i],function(e){if(!this.flags.stopped){var t={totalTime:e.target.duration,currentTime:e.target.currentTime};switch(e.type){case"play":this.flags.videoStart&&r.call(this,g.create(g.AdPlaying,t));break;case"pause":if(t.currentTime/t.totalTime>=.98)return;l.flags.userEngaged||r.call(this,g.create(g.AdPaused,t));break;case"ended":l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,h.customEvent("video_timer_clr_byend")),r.call(this,g.create(g.AdVideoComplete,t));break;case"error":y.error("JS-VPAID-WCM::ERROR => mediaElement",e),r.call(this,g.create(g.AdError,t));break;case"timeupdate":if(!this.flags.videoStart&&t.currentTime){l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,setTimeout(function(){h.customEvent("video_timer_clr_"+c.intervalTime)},250)),this.flags.videoStart=!0,r.call(this,g.create(g.AdVideoStart,t));var i=e.target.currentSrc;i&&i.match(/[a-z0-9]+$/)&&setTimeout(function(){},250)}l.flags.userEngaged||r.call(this,g.create(g.AdRemainingTimeChange,t))}}}.bind(this),!0);for(1===this.video.nodeType&&"function"==typeof this.video.hasAttribute&&this.video.hasAttribute("src")&&"function"==typeof this.video.getAttribute&&""!=this.video.getAttribute("src")&&(l.savedSource=this.video.getAttribute("src"),this.video.removeAttribute("src")),i=0;i<o.length;i++)if(this.video.canPlayType(o[i].type)){var n=t.createElement("source");if(n.type=o[i].type,n.src=s+o[i].src,n.id="wb-src-"+Math.round(1e12*Math.random()).toString(36),"function"==typeof this.video.appendChild&&this.video.appendChild(n),l.flags.isGoog||"function"==typeof this.video.hasAttribute&&!this.video.hasAttribute("src")||"function"==typeof this.video.getAttribute&&""==this.video.getAttribute("src")){var d=s+o[i].src;this.video.setAttribute("src",d)}if("function"==typeof this.video.load&&this.video.load(),a=!0,"video/mp4"==o[i].type)break}return l.customParams.sd>0&&(l.volume=0,l.mute=!0),l.customParams.dmmt&&h.customEvent("videoplayer_inited_"+a),a}},play:function(){return!!(l.customParams.nr||this.flags.inited&&!this.flags.started)&&(l.customParams.nr&&(l.middleEvents[0]=!1,l.middleEvents[1]=!1,l.middleEvents[2]=!1),this.flags.started=!0,l.customParams.dmmt&&0==this.intervalTime&&(this.interval=setInterval(function(){c.intervalTime+=1e3,h.customEvent("video_timer_"+c.intervalTime)},1e3)),l.customParams.dmmt&&h.customEvent("videoplayer_playcommand_received"),this.video.play(),!0)},pause:function(){!this.flags.paused&&this.flags.started&&(this.flags.paused=!0,this.video.pause())},resume:function(){this.flags.paused&&(this.flags.paused=!1,this.video.play())},stop:function(){return!(!this.flags.started||this.flags.stopped)&&(l.customParams.dmmt&&c.interval&&(clearInterval(c.interval),c.interval=null,h.customEvent("video_timer_clr_stop")),this.flags.stopped=!0,void this.pause())},events:["play","pause","ended","timeupdate","error"]},m={flags:{},init:function(e,i){this.root=e.appendChild(t.createElement("div")),this.root.id="wb-"+Math.round(1e12*Math.random()).toString(36);var a=t.createElement("link");a.rel="stylesheet",a.href=l.adParameters.mediapath+"style.min.css?v=37rl5iy5w9s0",this.root.appendChild(a),this.videoElement=i||this.root.appendChild(t.createElement("video")),this.videoElement.setAttribute("webkit-playsinline","playsinline"),this.videoElement.setAttribute("playsinline","playsinline"),l.customParams.nr&&this.videoElement.setAttribute("preload","auto");var o=l.adParameters.submediapath?l.adParameters.submediapath:l.adParameters.mediapath;l.customParams.up&&(this.videoElement.poster=o+"poster.png"),this.updateSize(),l.realWindow.addEventListener("message",function(e){if(e.origin===l.origin){var t={};try{t=JSON.parse(e.data)}catch(i){}t.id===this.root.id&&s.call(this,t)}}.bind(this),!1),this.frameElement=this.root.appendChild(t.createElement("iframe")),this.frameElement.setAttribute("scrolling","no"),this.frameElement.setAttribute("frameborder","no"),this.frameElement.setAttribute("allow","autoplay"),this.frameElement.src=(l.adParameters.customView?l.adParameters.customView:l.adParameters.mediapath+"index.html")+"?id="+this.root.id},hide:function(e){this.frameElement&&(this.frameElement.style.display=e?"none":"inline-block")},update:function(e){this.frameElement&&this.frameElement.contentWindow&&("object"==typeof e&&f&&(e.viewState=e.viewState||f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state),this.frameElement&&this.frameElement.contentWindow.postMessage(JSON.stringify({id:this.root.id,event:e}),"*"))},destroy:function(){if(!this.root||!this.root.parentNode||"function"!=typeof this.root.parentNode.removeChild)return!1;if(this.root.parentNode.removeChild(this.root),this.videoElement&&this.videoElement.attributes)for(;this.videoElement.attributes.length;)this.videoElement.removeAttribute(this.videoElement.attributes[0].nodeName);for(var e in l.savedAttributes)this.videoElement.setAttribute(e,l.savedAttributes[e]);if(l.savedSource&&""!==l.savedSource&&(this.videoElement.setAttribute("src",l.savedSource),this.videoElement.load(),this.videoElement.play()),"function"==typeof this.videoElement.querySelectorAll)for(var t=this.videoElement.querySelectorAll("source[id^='wb-src-']"),i=0;i<t.length;i++)this.videoElement.removeChild(t[i]);if(this.videoElement&&this.videoElement.attributes)for(var a,i=0,o=this.videoElement.attributes,r=o.length;i<r;i++)a=o[i];return!0},cssStyle:function(e){this.root.style.cssText=e,this.updateSize()},resizeVideoElement:function(e){this.videoElement&&this.videoElement.style&&(this.videoElement.style.width=e.width+("string"==typeof e.width?"":"px"),this.videoElement.style.height=e.height+("string"==typeof e.height?"":"px"),this.videoElement.style.top=e.top+("string"==typeof e.top?"":"px"),this.videoElement.style.left=e.left+("string"==typeof e.left?"":"px"))},updateSize:function(){return!!this.root&&(this.root.style.width=l.adSize.width+"px",this.root.style.height=l.adSize.height+"px",void(this.videoElement&&this.videoElement.style&&(this.videoElement.style.width=l.adSize.width+"px",this.videoElement.style.height=l.adSize.height+"px")))}},h={init:function(t,i,a,o){this.options={protocol:e.location.protocol,domain:t.domain,account:t.account,tte:t.tte,aap:t.aap,agi:Math.round(1e3*Math.random())},this.options.protocol.indexOf("http")==-1&&(this.options.protocol="https:"),this.viewableEvents=i||[],this.audibleEvents=o||[],this.pixelTrackEvents=a},protocol:function(){return this.options.protocol},trackEvent:function(e){if(g.convert(e)!==e){var t="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn={{name}}&g.ra={{random}}";e===g.AdImpression&&(t="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=im&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.hr=XC&g.ra={{random}}"),this.options.name=g.convert(e),this.options.random=Math.round(1e6*Math.random()),this.sendToURL(this.prepareURL(t,this.options))}if(this.pixelTrackEvents.hasOwnProperty(e)&&""!=this.pixelTrackEvents[e]&&this.sendToURL(this.pixelTrackEvents[e]),this.viewableEvents.indexOf(e)!=-1){var i=e+f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state;this.customEvent(i)}if(l.customParams.aev&&this.audibleEvents.indexOf(e)!=-1){var i=e+(l.mute?a.OFF:a.ON);this.customEvent(i)}},customEvent:function(e){if("undefined"==typeof e||"undefined"==e)h.customEvent("error_undefined_event");else{e.indexOf("extended_video")!=-1&&(e+="_"+f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state.toLowerCase());var t="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=ev&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&a.evn={{name}}&g.ra={{random}}";this.options.name=e,this.options.random=Math.round(1e6*Math.random()),this.sendToURL(this.prepareURL(t,this.options)),this.pixelTrackEvents.hasOwnProperty(e)&&""!=this.pixelTrackEvents[e]&&this.sendToURL(this.pixelTrackEvents[e]),e!=A.MRCViewable&&e!=A.MRCUnviewable||m.update({type:e}),l.adParameters.hasOwnProperty("customEvents")&&l.adParameters.customEvents.hasOwnProperty(e)&&this.sendToURL(this.prepareURL(l.adParameters.customEvents[e],this.options))}},getClickURL:function(e){var t="{{protocol}}//{{domain}}/fcgi-bin/dispatch.fcgi?a.A=cl&a.si={{account}}&a.te={{tte}}&a.aap={{aap}}&a.agi={{agi}}&g.lu=";if(e&&"default"!==e){var i=e.match(/\d+/g);i&&1==i.length&&(t+="&a.urlid="+(parseInt(i[0],10)+0))}return l.customParams.utm&&(this.options.aycp=encodeURIComponent(l.customParams.utm),t+="&a.ycp={{aycp}}"),this.prepareURL(t,this.options)},prepareURL:function(e,t){t=t||this.options,l.adParameters.hasOwnProperty("wcm")&&l.adParameters.wcm.hasOwnProperty("siteid")&&(t.aycp=l.adParameters.wcm.siteid,e+="&a.ycp={{aycp}}");for(var i in t)t.hasOwnProperty(i)&&(e=e.replace(new RegExp("{{"+i+"}}","g"),t[i]));return e},sendToURL:function(e,i){var a=t.createElement("img");i&&(a.onload=a.onerror=i),a.src=e}},a.ON="Audible",a.OFF="Inaudible",a.DELAY=250,a.FIRE_TIME=2e3,a.prototype.start=function(){this.updater||(this.started=!0,this.updater=setInterval(a.updateTime.bind(this),a.DELAY))},a.prototype.pause=function(){this.updater&&(clearInterval(this.updater),this.updater=null)},a.prototype.resume=function(){this.started&&this.start()},a.prototype.stop=function(e){this.updater&&clearInterval(this.updater),this.started=!1,a.updateTime.call(this),this.audibilityFired||e||(this.audibilityFired=!0,h.customEvent(a.OFF))},a.updateTime=function(){return this.audibilityFired?clearInterval(this.updater):(l.mute||l.volume<=0?this.secondsAudible=0:this.secondsAudible+=a.DELAY,void(this.secondsAudible>=a.FIRE_TIME&&(this.audibilityFired=!0,h.customEvent(a.ON),clearInterval(this.updater))))},o.DELAY=250,o.ON_PAGE="OnPage",o.S_FRAME="SameDomainFrame",o.X_FRAME="CrossDomainFrame",o.VIEWABLE="Viewable",o.NOT_VIEWABLE="Unviewable",o.UNDETERMINED="Undetermined",o.prototype.hasFocus=function(){return("undefined"===t.hidden||t.hidden!==!0)&&(this.getPosition()===o.X_FRAME||"function"!=typeof e.top.document.hasFocus||e.top.document.hasFocus())},o.prototype.getPosition=function(){if(!this.position)if(e.top===l.realWindow)this.position=o.ON_PAGE;else{this.position=o.S_FRAME;try{for(var t=l.realWindow;t.parent!==t;){if(t.parent.document.domain!==t.document.domain){this.position=o.X_FRAME;break}t=t.parent}}catch(i){this.position=o.X_FRAME}}return this.position},o.prototype.init=function(e,t){if(this.intersectionSupport){var i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?this.rootElement.ownerDocument.defaultView.IntersectionObserver:IntersectionObserver;this.intersectionObserver=new i(function(e){this.intersectionRatio=Math.round(1e4*e[0].intersectionRatio)/100}.bind(this),{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),this.intersectionObserver.observe(this.rootElement)}else if(this.getPosition()==o.X_FRAME){if(e&&e.length&&"function"==typeof t)for(;e.length;)t(e.shift().name+o.UNDETERMINED);return!1}2==arguments.length&&e&&e.length&&"function"==typeof t&&(this.observerData=e,this.observerHandler=t)},o.prototype.start=function(){this.updater||(this.started=!0,this.updater=setInterval(o.updateTime.bind(this),o.DELAY))},o.prototype.pause=function(){this.updater&&(clearInterval(this.updater),this.updater=null)},o.prototype.resume=function(){this.started&&this.start()},o.prototype.stop=function(e){if(this.updater&&clearInterval(this.updater),this.started=!1,o.updateTime.call(this),this.observerData&&this.observerData.length&&!e)for(;this.observerData.length;)this.observerHandler(this.observerData.shift().name+o.NOT_VIEWABLE);this.observerData=[]},o.prototype.getViewAbility=function(t,i){if(this.intersectionSupport)return o.match(this.hasFocus(),i,this.intersectionRatio,t);if(this.getPosition()==o.X_FRAME)return{state:o.UNDETERMINED,percent:0,focus:!1};if("undefined"==typeof l.realWindow||"object"!=typeof l.realWindow)return h.customEvent("error_slot_window"),{state:o.UNDETERMINED,percent:0,focus:!1};var a=l.realWindow,r=this.rootElement.getBoundingClientRect(),s=o.calculateArea(r,a);try{for(;a!==e.top;){var n=a.name||(a.name="wb-"+Math.round(1e6*Math.random()).toString(16));a=a.parent,r=a.frames[n].frameElement.getBoundingClientRect(),s=Math.min(o.calculateArea(r,a),s)}}catch(d){return{state:o.UNDETERMINED,percent:0,focus:!1}}return o.match(this.hasFocus(),i,s,t)},o.updateTime=function(){var e=this.getViewAbility();if(!this.observerData||!this.observerData.length)return clearInterval(this.updater);for(var t=[],i=0;i<this.observerData.length;i++){var a=this.observerData[i];l.customParams.nr&&(a.useFocus=!1),"string"!=typeof a.duration||a.duration.indexOf("%")==-1||isNaN(l.metaData.totalTime)||(a.duration=Math.floor(2*l.metaData.totalTime)/2*parseInt(a.duration,10)*10),(!a.useFocus||e.focus)&&Math.round(e.percent)>=a.percent?"true"==a.useSound?a.timeInView=l.mute?0:o.DELAY+(a.timeInView||0):a.timeInView=o.DELAY+(a.timeInView||0):a.timeInView=0,a.timeInView>=a.duration?this.observerHandler(a.name+o.VIEWABLE):t.push(a)}this.observerData=t},o.match=function(e,t,i,a){var r=o.NOT_VIEWABLE;return 3333333==i?(r=o.UNDETERMINED,{state:r,focus:e,percent:i}):((e||!t)&&i>=a&&(r=o.VIEWABLE),{state:r,focus:e,percent:i})},o.calculateArea=function(e,t){var i=e.width*e.height,a=e.width,o=e.height;return e.top<0&&(o+=e.top),e.bottom>t.innerHeight&&(o-=e.bottom-t.innerHeight),e.left<0&&(a+=e.left),e.right>t.innerWidth&&(a-=e.right-t.innerWidth),a*o*100/i},g={create:function(e,t){return{type:e,data:t}},convert:function(e){return{AdLoaded:"load",AdStarted:"creativeView",AdVideoStart:"start",AdImpression:"impression",AdVideoFirstQuartile:"firstQuartile",AdVideoMidpoint:"midpoint",AdVideoThirdQuartile:"thirdQuartile",AdVideoComplete:"complete",AdUserClose:"close",AdSkipped:"skip",AdClickThru:"click",AdPaused:"pause",AdPlaying:"resume",AdVolumeChange:"volume"}[e]||e}},g.AdLoaded="AdLoaded",g.AdStarted="AdStarted",g.AdStopped="AdStopped",g.AdSkipped="AdSkipped",g.AdLinearChange="AdLinearChange",g.AdSizeChange="AdSizeChange",g.AdExpandedChange="AdExpandedChange",g.AdSkippableStateChange="AdSkippableStateChange",g.AdRemainingTimeChange="AdRemainingTimeChange",g.AdDurationChange="AdDurationChange",g.AdVolumeChange="AdVolumeChange",g.AdImpression="AdImpression",g.AdVideoStart="AdVideoStart",g.AdVideoFirstQuartile="AdVideoFirstQuartile",g.AdVideoMidpoint="AdVideoMidpoint",g.AdVideoThirdQuartile="AdVideoThirdQuartile",g.AdVideoComplete="AdVideoComplete",g.AdClickThru="AdClickThru",g.AdInteraction="AdInteraction",g.AdUserAcceptInvitation="AdUserAcceptInvitation",g.AdUserMinimize="AdUserMinimize",g.AdUserClose="AdUserClose",g.AdPaused="AdPaused",g.AdPlaying="AdPlaying",g.AdLog="AdLog",g.AdError="AdError",A={},A.MRCViewable="MRCViewable",A.MRCUnviewable="MRCUnviewable",A.MRCUndetermined="MRCUndetermined",y={injectScripts:function(e,i){if(i&&i.length)for(var a in i)if(i.hasOwnProperty(a)){var o=t.createElement("script");o.type="text/javascript",o.src=i[a],e.appendChild(o)}},injectIFrames:function(e,i){if(l.customParams.sf>0){var a=t.createElement("iframe");a.src=h.protocol()+"//cstatic.weborama.fr/iframe/external_all.html",a.style.cssText="width:1px;height:1px;visibility:hidden;position:absolute;border:0",e.appendChild(a)}if(i&&i.length)for(var o in i)if(i.hasOwnProperty(o)){var a=t.createElement("iframe");a.src=i[o],a.style.cssText="width:1px;height:1px;visibility:hidden;position:absolute;border:0",e.appendChild(a)}},log:function(){i&&console.log.apply(console,["JS-VPAID-WCM::INFO =>"].concat(arguments))},warn:function(){console.log.apply(console,["JS-VPAID-WCM::WARN =>"].concat(arguments))},error:function(){console.log.apply(console,["JS-VPAID-WCM::ERROR =>"].concat(arguments))}},u=function(){console.log("JS-VPAID-WCM::INFO => 2020-02-27T15:16:07.443Z")},u.prototype.handshakeVersion=function(){return y.log("handshakeVersion"),"2.0"},u.prototype.initAd=function(e,r,s,u,c,A){if("string"==typeof c&&(c={AdParameters:c},y.warn('The typeof parameter "creativeData" should be an "object" with key "AdParameters"'),y.warn("Read page 44 from https://www.iab.com/wp-content/uploads/2015/06/VPAID_2_0_Final_04-10-2012.pdf")),"object"!=typeof c||!c.AdParameters||"object"!=typeof A||!A.slot)return y.error(d.WRONG_INIT_PARAMS),y.error("initAd",arguments),n.d(g.create(g.AdError,d.WRONG_INIT_PARAMS));try{l.adParameters=JSON.parse(c.AdParameters)}catch(E){return y.error(d.WRONG_AD_PARAMETERS),y.error("initAd",arguments),n.d(g.create(g.AdError,d.WRONG_AD_PARAMETERS))}var b={aev:1,cf:0,co:5,ct:1,daf:750,dm:0,dmmt:0,dmts:0,ex:0,fdc:0,imho:0,imu:1,nr:0,plc:0,poc:0,sd:0,sf:0,sk:1,ss:1,st:1,ts:1,tsec:0,up:0,us:0,utm:0};try{if(l.adParameters.cp)for(var P=decodeURIComponent(l.adParameters.cp).split("|"),_=0;_<P.length;_++)if(P[_]){var S=P[_].split(":");2==S.length&&""!=S[1]?"undefined"!=typeof b[S[0]]?b[S[0]]=S[1].match(/[a-zA-Z]/i)?S[1]:parseInt(S[1],10):b[S[0]]=S[1]:b[S[0]]=!0}}catch(E){}if(l.customParams=b,l.playerSizeParams=l.adParameters.playerSize||{PlayerSmallDesktop:[0,400],PlayerStickyDesktop:[400,480],PlayerNormalDesktop:[480,720],PlayerBigDesktop:[720,960],PlayerHugeDesktop:[960,0],PlayerSmallMobile:[0,260],PlayerNormalMobile:[260,320],PlayerBigMobile:[320,380],PlayerHugeMobile:[380,0]},l.adSize={width:e,height:r,viewMode:s},i=!!l.customParams.dm,l.defaultVolume=.5,y.log("initAd",arguments),A.videoSlot&&"undefined"!=typeof A.videoSlot.attributes)for(var w,_=0,T=A.videoSlot.attributes,V=T.length;_<V;_++)w=T[_],l.savedAttributes[w.nodeName]=w.nodeValue;var D=[g.AdImpression,g.AdVideoStart,g.AdVideoFirstQuartile,g.AdVideoMidpoint,g.AdVideoThirdQuartile,g.AdVideoComplete],I=[g.AdVideoStart,g.AdVideoFirstQuartile,g.AdVideoMidpoint,g.AdVideoThirdQuartile,g.AdVideoComplete],M={};if(l.adParameters.pixel&&l.adParameters.pixel.length)for(var _=0;_<l.adParameters.pixel.length;_++){var C=l.adParameters.pixel[_];M[C.name]=C.url}h.init(l.adParameters.wcm,D,M,I),A.slot&&1===A.slot.nodeType||(A.slot=t.body,y.warn('Invalid parameter "environmentVars.slot"'));var R=0;for(var k in A.videoSlot)if(A.videoSlot.hasOwnProperty(k)){var O=""+A.videoSlot[k];switch(k){case"currentSrc":case"currentTime":case"duration":case"ended":case"handlers":case"paused":case"playbackRate":case"playsinline":case"src":case"type":case"webkit-playsinline":R++}O.indexOf("goog_")!==-1&&(l.flags.isGoog=!0)}if(!A.videoSlot||1===A.videoSlot.nodeType&&"VIDEO"===A.videoSlot.nodeName.toUpperCase()||l.flags.isGoog||(R>=10?l.flags.isGoog=!0:(h.customEvent("error_videoslot_null"),A.videoSlot=null,y.warn('Invalid parameter "environmentVars.videoSlot"'))),m.init(A.slot,A.videoSlot?A.videoSlot:null),p=new a,f=new o(m.root),f.init(l.adParameters.mrcTracker,function(e){l.flags[e]=!0,h.customEvent(e),l.customParams.imho>0&&h.customEvent(e+"_site_"+l.customParams.imho)}.bind(this)),y.injectScripts(m.root,l.adParameters.scripts),y.injectIFrames(m.root,l.adParameters.frames),l.customParams.poc)var N=setInterval(function(){var e=f.getViewAbility(l.viewAbilityPercent,l.viewAbilityHasFocus).state;l.flags.visibleReport!=e&&(l.flags.visibleReport=e,e==o.VIEWABLE?v.resumeAd():e==o.NOT_VIEWABLE?v.pauseAd():e==o.UNDETERMINED&&clearInterval(N))},500);h.customEvent(f.getPosition())},u.prototype.startAd=function(){y.log("startAd"),l.customParams.dmmt&&h.customEvent("start_ad"),c.play()&&(l.state=g.AdStarted)},u.prototype.stopAd=function(){y.log("stopAd"),c.stop(),p.stop(),f.stop(),m.destroy()&&(l.state=g.AdStopped)},u.prototype.skipAd=function(){y.log("try_skipAd"),this.getAdSkippableState()&&(y.log("skipAd"),l.state=g.AdSkipped,c.stop(),p.stop(),f.stop(),m.hide(!0),setTimeout(function(){v.stopAd()},l.customParams.daf))},u.prototype.resizeAd=function(e,t,i){y.log("resizeAd",arguments);var a=l.fullscreen;l.adSize={width:e,height:t,viewMode:i||"normal"},l.fullscreen&&!a&&h.customEvent("isFullscreen"),m.updateSize()},u.prototype.pauseAd=function(){l.flags.userEngaged||(y.log("pauseAd"),c.pause(),p.pause(),f.pause())},u.prototype.fakePauseAd=function(e){y.log("fakePauseAd"),l.flags.userEngaged=!0,c.pause(),l.remainingTime=-2,l.duration=-2},u.prototype.resumeAd=function(){l.flags.userEngaged||(y.log("resumeAd"),c.resume(),p.resume(),f.resume(),m.update({type:"forcedResumeAd"}))},u.prototype.expandAd=function(){y.log("expandAd"),n.d(g.create(g.AdLog,d.NOT_ALLOWED_METHOD))},u.prototype.collapseAd=function(){y.log("collapseAd"),n.d(g.create(g.AdLog,d.NOT_ALLOWED_METHOD))},u.prototype.setAdVolume=function(e){y.log("setAdVolume",e),e="string"==typeof e?parseInt(e,10):e,e>1&&(e/=100),e<0&&(e=0),l.mute=!e,l.volume=e},u.prototype.getAdVolume=function(){return y.log("getAdVolume"),l.mute?0:l.volume},u.prototype.getAdDuration=function(){return l.flags.userEngaged?l.duration:l.metaData?l.metaData.totalTime:-2},u.prototype.getAdLinear=function(){return y.log("getAdLinear"),l.linear},u.prototype.getAdWidth=function(){return y.log("getAdWidth"),l.adSize.width},u.prototype.getAdHeight=function(){return y.log("getAdHeight"),l.adSize.height},u.prototype.getAdRemainingTime=function(){return l.remainingTime},u.prototype.getAdExpanded=function(){
return y.log("getAdExpanded"),!0},u.prototype.getAdSkippableState=function(){return y.log("getAdSkippableState"),l.canSkip},u.prototype.getAdIcons=function(){return y.log("getAdIcons"),!1},u.prototype.getAdCompanions=function(){return y.log("getAdCompanions"),""},u.prototype.subscribe=function(e,t,i){n.subscribe(e,t,i)},u.prototype.unsubscribe=function(e,t){n.unsubscribe(e,t)},e.getVPAIDAd=function(){return v||(v=new u),v}}(window,document);